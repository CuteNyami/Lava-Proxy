plugins {
    id 'java'
}

group 'org.example'
version '1.0-SNAPSHOT'

repositories {
    mavenCentral()
}

configurations {
    extraLibs
}

dependencies {
    compileJava.options.encoding = 'UTF-8'

    implementation('org.jline:jline:3.21.0')
    implementation('org.jline:jline-terminal:3.21.0')
    implementation('org.jline:jline-reader:3.21.0')
    implementation('org.fusesource.jansi:jansi:2.4.0')

    extraLibs group: 'com.google.code.gson', name: 'gson', version: '2.8.9'

    configurations.implementation.extendsFrom(configurations.extraLibs)
}

jar {
    from {
        configurations.extraLibs.collect { it.isDirectory() ? it : zipTree(it) }
    }

    manifest {
        attributes(
                "Implementation-Title": "Lava-Proxy",
                "Implementation-Version": "0.0.1_pre-release",
                "Main-Class": "me.cutenyami.lava.Main"
        )
    }
}

java {
    toolchain {
        languageVersion = JavaLanguageVersion.of(8)
    }
}